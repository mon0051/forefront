{"version":3,"sources":["url_search_params.js"],"names":[],"mappings":"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","file":"url_search_params-compiled.js","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\"use strict\";\nvar collection_1 = require('../src/facade/collection');\nvar lang_1 = require('../src/facade/lang');\nfunction paramParser(rawParams) {\n    if (rawParams === void 0) { rawParams = ''; }\n    var map = new collection_1.Map();\n    if (rawParams.length > 0) {\n        var params = rawParams.split('&');\n        params.forEach(function (param) {\n            var split = param.split('=', 2);\n            var key = split[0];\n            var val = split[1];\n            var list = lang_1.isPresent(map.get(key)) ? map.get(key) : [];\n            list.push(val);\n            map.set(key, list);\n        });\n    }\n    return map;\n}\n/**\n * @experimental\n **/\nvar QueryEncoder = (function () {\n    function QueryEncoder() {\n    }\n    QueryEncoder.prototype.encodeKey = function (k) { return standardEncoding(k); };\n    QueryEncoder.prototype.encodeValue = function (v) { return standardEncoding(v); };\n    return QueryEncoder;\n}());\nexports.QueryEncoder = QueryEncoder;\nfunction standardEncoding(v) {\n    return encodeURIComponent(v)\n        .replace(/%40/gi, '@')\n        .replace(/%3A/gi, ':')\n        .replace(/%24/gi, '$')\n        .replace(/%2C/gi, ',')\n        .replace(/%3B/gi, ';')\n        .replace(/%2B/gi, '+')\n        .replace(/%3D/gi, ';')\n        .replace(/%3F/gi, '?')\n        .replace(/%2F/gi, '/');\n}\n/**\n * Map-like representation of url search parameters, based on\n * [URLSearchParams](https://url.spec.whatwg.org/#urlsearchparams) in the url living standard,\n * with several extensions for merging URLSearchParams objects:\n *   - setAll()\n *   - appendAll()\n *   - replaceAll()\n *\n * This class accepts an optional second parameter of ${@link QueryEncoder},\n * which is used to serialize parameters before making a request. By default,\n * `QueryEncoder` encodes keys and values of parameters using `encodeURIComponent`,\n * and then un-encodes certain characters that are allowed to be part of the query\n * according to IETF RFC 3986: https://tools.ietf.org/html/rfc3986.\n *\n * These are the characters that are not encoded: `! $ \\' ( ) * + , ; A 9 - . _ ~ ? /`\n *\n * If the set of allowed query characters is not acceptable for a particular backend,\n * `QueryEncoder` can be subclassed and provided as the 2nd argument to URLSearchParams.\n *\n * ```\n * import {URLSearchParams, QueryEncoder} from '@angular/http';\n * class MyQueryEncoder extends QueryEncoder {\n *   encodeKey(k: string): string {\n *     return myEncodingFunction(k);\n *   }\n *\n *   encodeValue(v: string): string {\n *     return myEncodingFunction(v);\n *   }\n * }\n *\n * let params = new URLSearchParams('', new MyQueryEncoder());\n * ```\n * @experimental\n */\nvar URLSearchParams = (function () {\n    function URLSearchParams(rawParams, queryEncoder) {\n        if (rawParams === void 0) { rawParams = ''; }\n        if (queryEncoder === void 0) { queryEncoder = new QueryEncoder(); }\n        this.rawParams = rawParams;\n        this.queryEncoder = queryEncoder;\n        this.paramsMap = paramParser(rawParams);\n    }\n    URLSearchParams.prototype.clone = function () {\n        var clone = new URLSearchParams();\n        clone.appendAll(this);\n        return clone;\n    };\n    URLSearchParams.prototype.has = function (param) { return this.paramsMap.has(param); };\n    URLSearchParams.prototype.get = function (param) {\n        var storedParam = this.paramsMap.get(param);\n        if (collection_1.isListLikeIterable(storedParam)) {\n            return collection_1.ListWrapper.first(storedParam);\n        }\n        else {\n            return null;\n        }\n    };\n    URLSearchParams.prototype.getAll = function (param) {\n        var mapParam = this.paramsMap.get(param);\n        return lang_1.isPresent(mapParam) ? mapParam : [];\n    };\n    URLSearchParams.prototype.set = function (param, val) {\n        var mapParam = this.paramsMap.get(param);\n        var list = lang_1.isPresent(mapParam) ? mapParam : [];\n        collection_1.ListWrapper.clear(list);\n        list.push(val);\n        this.paramsMap.set(param, list);\n    };\n    // A merge operation\n    // For each name-values pair in `searchParams`, perform `set(name, values[0])`\n    //\n    // E.g: \"a=[1,2,3], c=[8]\" + \"a=[4,5,6], b=[7]\" = \"a=[4], c=[8], b=[7]\"\n    //\n    // TODO(@caitp): document this better\n    URLSearchParams.prototype.setAll = function (searchParams) {\n        var _this = this;\n        searchParams.paramsMap.forEach(function (value, param) {\n            var mapParam = _this.paramsMap.get(param);\n            var list = lang_1.isPresent(mapParam) ? mapParam : [];\n            collection_1.ListWrapper.clear(list);\n            list.push(value[0]);\n            _this.paramsMap.set(param, list);\n        });\n    };\n    URLSearchParams.prototype.append = function (param, val) {\n        var mapParam = this.paramsMap.get(param);\n        var list = lang_1.isPresent(mapParam) ? mapParam : [];\n        list.push(val);\n        this.paramsMap.set(param, list);\n    };\n    // A merge operation\n    // For each name-values pair in `searchParams`, perform `append(name, value)`\n    // for each value in `values`.\n    //\n    // E.g: \"a=[1,2], c=[8]\" + \"a=[3,4], b=[7]\" = \"a=[1,2,3,4], c=[8], b=[7]\"\n    //\n    // TODO(@caitp): document this better\n    URLSearchParams.prototype.appendAll = function (searchParams) {\n        var _this = this;\n        searchParams.paramsMap.forEach(function (value, param) {\n            var mapParam = _this.paramsMap.get(param);\n            var list = lang_1.isPresent(mapParam) ? mapParam : [];\n            for (var i = 0; i < value.length; ++i) {\n                list.push(value[i]);\n            }\n            _this.paramsMap.set(param, list);\n        });\n    };\n    // A merge operation\n    // For each name-values pair in `searchParams`, perform `delete(name)`,\n    // followed by `set(name, values)`\n    //\n    // E.g: \"a=[1,2,3], c=[8]\" + \"a=[4,5,6], b=[7]\" = \"a=[4,5,6], c=[8], b=[7]\"\n    //\n    // TODO(@caitp): document this better\n    URLSearchParams.prototype.replaceAll = function (searchParams) {\n        var _this = this;\n        searchParams.paramsMap.forEach(function (value, param) {\n            var mapParam = _this.paramsMap.get(param);\n            var list = lang_1.isPresent(mapParam) ? mapParam : [];\n            collection_1.ListWrapper.clear(list);\n            for (var i = 0; i < value.length; ++i) {\n                list.push(value[i]);\n            }\n            _this.paramsMap.set(param, list);\n        });\n    };\n    URLSearchParams.prototype.toString = function () {\n        var _this = this;\n        var paramsList = [];\n        this.paramsMap.forEach(function (values, k) {\n            values.forEach(function (v) { return paramsList.push(_this.queryEncoder.encodeKey(k) + '=' + _this.queryEncoder.encodeValue(v)); });\n        });\n        return paramsList.join('&');\n    };\n    URLSearchParams.prototype.delete = function (param) { this.paramsMap.delete(param); };\n    return URLSearchParams;\n}());\nexports.URLSearchParams = URLSearchParams;\n//# sourceMappingURL=url_search_params.js.map"]}