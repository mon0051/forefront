{"version":3,"sources":["select_multiple_control_value_accessor.js"],"names":[],"mappings":"AAAA;;;;;;;AAOA;;AACA,IAAI,SAAS,QAAQ,eAAR,CAAb;AACA,IAAI,eAAe,QAAQ,sBAAR,CAAnB;AACA,IAAI,SAAS,QAAQ,gBAAR,CAAb;AACA,IAAI,2BAA2B,QAAQ,0BAAR,CAA/B;AACA,IAAI,iCAAiC;AACjC,aAAS,yBAAyB,iBADD;AAEjC,iBAAa,OAAO,UAAP,CAAkB,YAAY;AAAE,eAAO,kCAAP;AAA4C,KAA5E,CAFoB;AAGjC,WAAO;AAH0B,CAArC;AAKA,SAAS,iBAAT,CAA2B,EAA3B,EAA+B,KAA/B,EAAsC;AAClC,QAAI,OAAO,OAAP,CAAe,EAAf,CAAJ,EACI,OAAO,KAAK,KAAZ;AACJ,QAAI,OAAO,QAAP,CAAgB,KAAhB,CAAJ,EACI,QAAQ,MAAM,KAAN,GAAc,GAAtB;AACJ,QAAI,CAAC,OAAO,WAAP,CAAmB,KAAnB,CAAL,EACI,QAAQ,QAAR;AACJ,WAAO,OAAO,aAAP,CAAqB,KAArB,CAA2B,KAAK,IAAL,GAAY,KAAvC,EAA8C,CAA9C,EAAiD,EAAjD,CAAP;AACH;AACD,SAAS,UAAT,CAAoB,WAApB,EAAiC;AAC7B,WAAO,YAAY,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAP;AACH;AACD;AACA,IAAI,iBAAkB,YAAY;AAC9B,aAAS,cAAT,GAA0B,CACzB;AACD,WAAO,cAAP;AACH,CAJqB,EAAtB;AAKA,IAAI,qCAAsC,YAAY;AAClD,aAAS,kCAAT,GAA8C;AAC1C;AACA,aAAK,UAAL,GAAkB,IAAI,GAAJ,EAAlB;AACA;AACA,aAAK,UAAL,GAAkB,CAAlB;AACA,aAAK,QAAL,GAAgB,UAAU,CAAV,EAAa,CAAG,CAAhC;AACA,aAAK,SAAL,GAAiB,YAAY,CAAG,CAAhC;AACH;AACD,uCAAmC,SAAnC,CAA6C,UAA7C,GAA0D,UAAU,KAAV,EAAiB;AACvE,YAAI,QAAQ,IAAZ;AACA,aAAK,KAAL,GAAa,KAAb;AACA,YAAI,SAAS,IAAb,EACI;AACJ,YAAI,SAAS,KAAb;AACA;AACA,YAAI,MAAM,OAAO,GAAP,CAAW,UAAU,CAAV,EAAa;AAAE,mBAAO,MAAM,YAAN,CAAmB,CAAnB,CAAP;AAA+B,SAAzD,CAAV;AACA,aAAK,UAAL,CAAgB,OAAhB,CAAwB,UAAU,GAAV,EAAe,CAAf,EAAkB;AAAE,gBAAI,YAAJ,CAAiB,IAAI,OAAJ,CAAY,EAAE,QAAF,EAAZ,IAA4B,CAAC,CAA9C;AAAmD,SAA/F;AACH,KATD;AAUA,uCAAmC,SAAnC,CAA6C,gBAA7C,GAAgE,UAAU,EAAV,EAAc;AAC1E,YAAI,QAAQ,IAAZ;AACA,aAAK,QAAL,GAAgB,UAAU,CAAV,EAAa;AACzB,gBAAI,WAAW,EAAf;AACA,gBAAI,EAAE,cAAF,CAAiB,iBAAjB,CAAJ,EAAyC;AACrC,oBAAI,UAAU,EAAE,eAAhB;AACA,qBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,QAAQ,MAA5B,EAAoC,GAApC,EAAyC;AACrC,wBAAI,MAAM,QAAQ,IAAR,CAAa,CAAb,CAAV;AACA,wBAAI,MAAM,MAAM,eAAN,CAAsB,IAAI,KAA1B,CAAV;AACA,6BAAS,IAAT,CAAc,GAAd;AACH;AACJ,aAPD,MAQK;AACD,oBAAI,UAAU,EAAE,OAAhB;AACA,qBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,QAAQ,MAA5B,EAAoC,GAApC,EAAyC;AACrC,wBAAI,MAAM,QAAQ,IAAR,CAAa,CAAb,CAAV;AACA,wBAAI,IAAI,QAAR,EAAkB;AACd,4BAAI,MAAM,MAAM,eAAN,CAAsB,IAAI,KAA1B,CAAV;AACA,iCAAS,IAAT,CAAc,GAAd;AACH;AACJ;AACJ;AACD,eAAG,QAAH;AACH,SArBD;AAsBH,KAxBD;AAyBA,uCAAmC,SAAnC,CAA6C,iBAA7C,GAAiE,UAAU,EAAV,EAAc;AAAE,aAAK,SAAL,GAAiB,EAAjB;AAAsB,KAAvG;AACA;AACA,uCAAmC,SAAnC,CAA6C,eAA7C,GAA+D,UAAU,KAAV,EAAiB;AAC5E,YAAI,KAAK,CAAC,KAAK,UAAL,EAAD,EAAoB,QAApB,EAAT;AACA,aAAK,UAAL,CAAgB,GAAhB,CAAoB,EAApB,EAAwB,KAAxB;AACA,eAAO,EAAP;AACH,KAJD;AAKA;AACA,uCAAmC,SAAnC,CAA6C,YAA7C,GAA4D,UAAU,KAAV,EAAiB;AACzE,aAAK,IAAI,KAAK,CAAT,EAAY,KAAK,aAAa,UAAb,CAAwB,IAAxB,CAA6B,KAAK,UAAlC,CAAtB,EAAqE,KAAK,GAAG,MAA7E,EAAqF,IAArF,EAA2F;AACvF,gBAAI,KAAK,GAAG,EAAH,CAAT;AACA,gBAAI,OAAO,cAAP,CAAsB,KAAK,UAAL,CAAgB,GAAhB,CAAoB,EAApB,EAAwB,MAA9C,EAAsD,KAAtD,CAAJ,EACI,OAAO,EAAP;AACP;AACD,eAAO,IAAP;AACH,KAPD;AAQA;AACA,uCAAmC,SAAnC,CAA6C,eAA7C,GAA+D,UAAU,WAAV,EAAuB;AAClF,YAAI,MAAM,KAAK,UAAL,CAAgB,GAAhB,CAAoB,WAAW,WAAX,CAApB,CAAV;AACA,eAAO,OAAO,SAAP,CAAiB,GAAjB,IAAwB,IAAI,MAA5B,GAAqC,WAA5C;AACH,KAHD;AAIA;AACA,uCAAmC,UAAnC,GAAgD,CAC5C,EAAE,MAAM,OAAO,SAAf,EAA0B,MAAM,CAAC;AACrB,sBAAU,2FADW;AAErB,kBAAM,EAAE,WAAW,yBAAb,EAAwC,UAAU,aAAlD,EAFe;AAGrB,uBAAW,CAAC,8BAAD;AAHU,SAAD,CAAhC,EAD4C,CAAhD;AAOA;AACA,uCAAmC,cAAnC,GAAoD,EAApD;AACA,WAAO,kCAAP;AACH,CA5EyC,EAA1C;AA6EA,QAAQ,kCAAR,GAA6C,kCAA7C;AACA,IAAI,yBAA0B,YAAY;AACtC,aAAS,sBAAT,CAAgC,QAAhC,EAA0C,SAA1C,EAAqD,OAArD,EAA8D;AAC1D,aAAK,QAAL,GAAgB,QAAhB;AACA,aAAK,SAAL,GAAiB,SAAjB;AACA,aAAK,OAAL,GAAe,OAAf;AACA,YAAI,OAAO,SAAP,CAAiB,KAAK,OAAtB,CAAJ,EAAoC;AAChC,iBAAK,EAAL,GAAU,KAAK,OAAL,CAAa,eAAb,CAA6B,IAA7B,CAAV;AACH;AACJ;AACD,WAAO,cAAP,CAAsB,uBAAuB,SAA7C,EAAwD,SAAxD,EAAmE;AAC/D,aAAK,aAAU,KAAV,EAAiB;AAClB,gBAAI,KAAK,OAAL,IAAgB,IAApB,EACI;AACJ,iBAAK,MAAL,GAAc,KAAd;AACA,iBAAK,gBAAL,CAAsB,kBAAkB,KAAK,EAAvB,EAA2B,KAA3B,CAAtB;AACA,iBAAK,OAAL,CAAa,UAAb,CAAwB,KAAK,OAAL,CAAa,KAArC;AACH,SAP8D;AAQ/D,oBAAY,IARmD;AAS/D,sBAAc;AATiD,KAAnE;AAWA,WAAO,cAAP,CAAsB,uBAAuB,SAA7C,EAAwD,OAAxD,EAAiE;AAC7D,aAAK,aAAU,KAAV,EAAiB;AAClB,gBAAI,OAAO,SAAP,CAAiB,KAAK,OAAtB,CAAJ,EAAoC;AAChC,qBAAK,MAAL,GAAc,KAAd;AACA,qBAAK,gBAAL,CAAsB,kBAAkB,KAAK,EAAvB,EAA2B,KAA3B,CAAtB;AACA,qBAAK,OAAL,CAAa,UAAb,CAAwB,KAAK,OAAL,CAAa,KAArC;AACH,aAJD,MAKK;AACD,qBAAK,gBAAL,CAAsB,KAAtB;AACH;AACJ,SAV4D;AAW7D,oBAAY,IAXiD;AAY7D,sBAAc;AAZ+C,KAAjE;AAcA;AACA,2BAAuB,SAAvB,CAAiC,gBAAjC,GAAoD,UAAU,KAAV,EAAiB;AACjE,aAAK,SAAL,CAAe,kBAAf,CAAkC,KAAK,QAAL,CAAc,aAAhD,EAA+D,OAA/D,EAAwE,KAAxE;AACH,KAFD;AAGA;AACA,2BAAuB,SAAvB,CAAiC,YAAjC,GAAgD,UAAU,QAAV,EAAoB;AAChE,aAAK,SAAL,CAAe,kBAAf,CAAkC,KAAK,QAAL,CAAc,aAAhD,EAA+D,UAA/D,EAA2E,QAA3E;AACH,KAFD;AAGA,2BAAuB,SAAvB,CAAiC,WAAjC,GAA+C,YAAY;AACvD,YAAI,OAAO,SAAP,CAAiB,KAAK,OAAtB,CAAJ,EAAoC;AAChC,iBAAK,OAAL,CAAa,UAAb,CAAwB,MAAxB,CAA+B,KAAK,EAApC;AACA,iBAAK,OAAL,CAAa,UAAb,CAAwB,KAAK,OAAL,CAAa,KAArC;AACH;AACJ,KALD;AAMA;AACA,2BAAuB,UAAvB,GAAoC,CAChC,EAAE,MAAM,OAAO,SAAf,EAA0B,MAAM,CAAC,EAAE,UAAU,QAAZ,EAAD,CAAhC,EADgC,CAApC;AAGA;AACA,2BAAuB,cAAvB,GAAwC,CACpC,EAAE,MAAM,OAAO,UAAf,EADoC,EAEpC,EAAE,MAAM,OAAO,QAAf,EAFoC,EAGpC,EAAE,MAAM,kCAAR,EAA4C,YAAY,CAAC,EAAE,MAAM,OAAO,QAAf,EAAD,EAA4B,EAAE,MAAM,OAAO,IAAf,EAA5B,CAAxD,EAHoC,CAAxC;AAKA;AACA,2BAAuB,cAAvB,GAAwC;AACpC,mBAAW,CAAC,EAAE,MAAM,OAAO,KAAf,EAAsB,MAAM,CAAC,SAAD,CAA5B,EAAD,CADyB;AAEpC,iBAAS,CAAC,EAAE,MAAM,OAAO,KAAf,EAAsB,MAAM,CAAC,OAAD,CAA5B,EAAD;AAF2B,KAAxC;AAIA,WAAO,sBAAP;AACH,CAhE6B,EAA9B;AAiEA,QAAQ,sBAAR,GAAiC,sBAAjC;AACA,QAAQ,iBAAR,GAA4B,CAAC,kCAAD,EAAqC,sBAArC,CAA5B;AACA","file":"select_multiple_control_value_accessor-compiled.js","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\"use strict\";\nvar core_1 = require('@angular/core');\nvar collection_1 = require('../facade/collection');\nvar lang_1 = require('../facade/lang');\nvar control_value_accessor_1 = require('./control_value_accessor');\nvar SELECT_MULTIPLE_VALUE_ACCESSOR = {\n    provide: control_value_accessor_1.NG_VALUE_ACCESSOR,\n    useExisting: core_1.forwardRef(function () { return SelectMultipleControlValueAccessor; }),\n    multi: true\n};\nfunction _buildValueString(id, value) {\n    if (lang_1.isBlank(id))\n        return \"\" + value;\n    if (lang_1.isString(value))\n        value = \"'\" + value + \"'\";\n    if (!lang_1.isPrimitive(value))\n        value = 'Object';\n    return lang_1.StringWrapper.slice(id + \": \" + value, 0, 50);\n}\nfunction _extractId(valueString) {\n    return valueString.split(':')[0];\n}\n/** Mock interface for HTMLCollection */\nvar HTMLCollection = (function () {\n    function HTMLCollection() {\n    }\n    return HTMLCollection;\n}());\nvar SelectMultipleControlValueAccessor = (function () {\n    function SelectMultipleControlValueAccessor() {\n        /** @internal */\n        this._optionMap = new Map();\n        /** @internal */\n        this._idCounter = 0;\n        this.onChange = function (_) { };\n        this.onTouched = function () { };\n    }\n    SelectMultipleControlValueAccessor.prototype.writeValue = function (value) {\n        var _this = this;\n        this.value = value;\n        if (value == null)\n            return;\n        var values = value;\n        // convert values to ids\n        var ids = values.map(function (v) { return _this._getOptionId(v); });\n        this._optionMap.forEach(function (opt, o) { opt._setSelected(ids.indexOf(o.toString()) > -1); });\n    };\n    SelectMultipleControlValueAccessor.prototype.registerOnChange = function (fn) {\n        var _this = this;\n        this.onChange = function (_) {\n            var selected = [];\n            if (_.hasOwnProperty('selectedOptions')) {\n                var options = _.selectedOptions;\n                for (var i = 0; i < options.length; i++) {\n                    var opt = options.item(i);\n                    var val = _this._getOptionValue(opt.value);\n                    selected.push(val);\n                }\n            }\n            else {\n                var options = _.options;\n                for (var i = 0; i < options.length; i++) {\n                    var opt = options.item(i);\n                    if (opt.selected) {\n                        var val = _this._getOptionValue(opt.value);\n                        selected.push(val);\n                    }\n                }\n            }\n            fn(selected);\n        };\n    };\n    SelectMultipleControlValueAccessor.prototype.registerOnTouched = function (fn) { this.onTouched = fn; };\n    /** @internal */\n    SelectMultipleControlValueAccessor.prototype._registerOption = function (value) {\n        var id = (this._idCounter++).toString();\n        this._optionMap.set(id, value);\n        return id;\n    };\n    /** @internal */\n    SelectMultipleControlValueAccessor.prototype._getOptionId = function (value) {\n        for (var _i = 0, _a = collection_1.MapWrapper.keys(this._optionMap); _i < _a.length; _i++) {\n            var id = _a[_i];\n            if (lang_1.looseIdentical(this._optionMap.get(id)._value, value))\n                return id;\n        }\n        return null;\n    };\n    /** @internal */\n    SelectMultipleControlValueAccessor.prototype._getOptionValue = function (valueString) {\n        var opt = this._optionMap.get(_extractId(valueString));\n        return lang_1.isPresent(opt) ? opt._value : valueString;\n    };\n    /** @nocollapse */\n    SelectMultipleControlValueAccessor.decorators = [\n        { type: core_1.Directive, args: [{\n                    selector: 'select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]',\n                    host: { '(input)': 'onChange($event.target)', '(blur)': 'onTouched()' },\n                    providers: [SELECT_MULTIPLE_VALUE_ACCESSOR]\n                },] },\n    ];\n    /** @nocollapse */\n    SelectMultipleControlValueAccessor.ctorParameters = [];\n    return SelectMultipleControlValueAccessor;\n}());\nexports.SelectMultipleControlValueAccessor = SelectMultipleControlValueAccessor;\nvar NgSelectMultipleOption = (function () {\n    function NgSelectMultipleOption(_element, _renderer, _select) {\n        this._element = _element;\n        this._renderer = _renderer;\n        this._select = _select;\n        if (lang_1.isPresent(this._select)) {\n            this.id = this._select._registerOption(this);\n        }\n    }\n    Object.defineProperty(NgSelectMultipleOption.prototype, \"ngValue\", {\n        set: function (value) {\n            if (this._select == null)\n                return;\n            this._value = value;\n            this._setElementValue(_buildValueString(this.id, value));\n            this._select.writeValue(this._select.value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NgSelectMultipleOption.prototype, \"value\", {\n        set: function (value) {\n            if (lang_1.isPresent(this._select)) {\n                this._value = value;\n                this._setElementValue(_buildValueString(this.id, value));\n                this._select.writeValue(this._select.value);\n            }\n            else {\n                this._setElementValue(value);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @internal */\n    NgSelectMultipleOption.prototype._setElementValue = function (value) {\n        this._renderer.setElementProperty(this._element.nativeElement, 'value', value);\n    };\n    /** @internal */\n    NgSelectMultipleOption.prototype._setSelected = function (selected) {\n        this._renderer.setElementProperty(this._element.nativeElement, 'selected', selected);\n    };\n    NgSelectMultipleOption.prototype.ngOnDestroy = function () {\n        if (lang_1.isPresent(this._select)) {\n            this._select._optionMap.delete(this.id);\n            this._select.writeValue(this._select.value);\n        }\n    };\n    /** @nocollapse */\n    NgSelectMultipleOption.decorators = [\n        { type: core_1.Directive, args: [{ selector: 'option' },] },\n    ];\n    /** @nocollapse */\n    NgSelectMultipleOption.ctorParameters = [\n        { type: core_1.ElementRef, },\n        { type: core_1.Renderer, },\n        { type: SelectMultipleControlValueAccessor, decorators: [{ type: core_1.Optional }, { type: core_1.Host },] },\n    ];\n    /** @nocollapse */\n    NgSelectMultipleOption.propDecorators = {\n        'ngValue': [{ type: core_1.Input, args: ['ngValue',] },],\n        'value': [{ type: core_1.Input, args: ['value',] },],\n    };\n    return NgSelectMultipleOption;\n}());\nexports.NgSelectMultipleOption = NgSelectMultipleOption;\nexports.SELECT_DIRECTIVES = [SelectMultipleControlValueAccessor, NgSelectMultipleOption];\n//# sourceMappingURL=select_multiple_control_value_accessor.js.map"]}