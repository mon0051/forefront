{"version":3,"sources":["select_control_value_accessor.js"],"names":[],"mappings":"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","file":"select_control_value_accessor-compiled.js","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\"use strict\";\nvar core_1 = require('@angular/core');\nvar collection_1 = require('../facade/collection');\nvar lang_1 = require('../facade/lang');\nvar control_value_accessor_1 = require('./control_value_accessor');\nexports.SELECT_VALUE_ACCESSOR = {\n    provide: control_value_accessor_1.NG_VALUE_ACCESSOR,\n    useExisting: core_1.forwardRef(function () { return SelectControlValueAccessor; }),\n    multi: true\n};\nfunction _buildValueString(id, value) {\n    if (lang_1.isBlank(id))\n        return \"\" + value;\n    if (!lang_1.isPrimitive(value))\n        value = 'Object';\n    return lang_1.StringWrapper.slice(id + \": \" + value, 0, 50);\n}\nfunction _extractId(valueString) {\n    return valueString.split(':')[0];\n}\nvar SelectControlValueAccessor = (function () {\n    function SelectControlValueAccessor(_renderer, _elementRef) {\n        this._renderer = _renderer;\n        this._elementRef = _elementRef;\n        /** @internal */\n        this._optionMap = new Map();\n        /** @internal */\n        this._idCounter = 0;\n        this.onChange = function (_) { };\n        this.onTouched = function () { };\n    }\n    SelectControlValueAccessor.prototype.writeValue = function (value) {\n        this.value = value;\n        var valueString = _buildValueString(this._getOptionId(value), value);\n        this._renderer.setElementProperty(this._elementRef.nativeElement, 'value', valueString);\n    };\n    SelectControlValueAccessor.prototype.registerOnChange = function (fn) {\n        var _this = this;\n        this.onChange = function (valueString) {\n            _this.value = valueString;\n            fn(_this._getOptionValue(valueString));\n        };\n    };\n    SelectControlValueAccessor.prototype.registerOnTouched = function (fn) { this.onTouched = fn; };\n    /** @internal */\n    SelectControlValueAccessor.prototype._registerOption = function () { return (this._idCounter++).toString(); };\n    /** @internal */\n    SelectControlValueAccessor.prototype._getOptionId = function (value) {\n        for (var _i = 0, _a = collection_1.MapWrapper.keys(this._optionMap); _i < _a.length; _i++) {\n            var id = _a[_i];\n            if (lang_1.looseIdentical(this._optionMap.get(id), value))\n                return id;\n        }\n        return null;\n    };\n    /** @internal */\n    SelectControlValueAccessor.prototype._getOptionValue = function (valueString) {\n        var value = this._optionMap.get(_extractId(valueString));\n        return lang_1.isPresent(value) ? value : valueString;\n    };\n    /** @nocollapse */\n    SelectControlValueAccessor.decorators = [\n        { type: core_1.Directive, args: [{\n                    selector: 'select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]',\n                    host: { '(change)': 'onChange($event.target.value)', '(blur)': 'onTouched()' },\n                    providers: [exports.SELECT_VALUE_ACCESSOR]\n                },] },\n    ];\n    /** @nocollapse */\n    SelectControlValueAccessor.ctorParameters = [\n        { type: core_1.Renderer, },\n        { type: core_1.ElementRef, },\n    ];\n    return SelectControlValueAccessor;\n}());\nexports.SelectControlValueAccessor = SelectControlValueAccessor;\nvar NgSelectOption = (function () {\n    function NgSelectOption(_element, _renderer, _select) {\n        this._element = _element;\n        this._renderer = _renderer;\n        this._select = _select;\n        if (lang_1.isPresent(this._select))\n            this.id = this._select._registerOption();\n    }\n    Object.defineProperty(NgSelectOption.prototype, \"ngValue\", {\n        set: function (value) {\n            if (this._select == null)\n                return;\n            this._select._optionMap.set(this.id, value);\n            this._setElementValue(_buildValueString(this.id, value));\n            this._select.writeValue(this._select.value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NgSelectOption.prototype, \"value\", {\n        set: function (value) {\n            this._setElementValue(value);\n            if (lang_1.isPresent(this._select))\n                this._select.writeValue(this._select.value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @internal */\n    NgSelectOption.prototype._setElementValue = function (value) {\n        this._renderer.setElementProperty(this._element.nativeElement, 'value', value);\n    };\n    NgSelectOption.prototype.ngOnDestroy = function () {\n        if (lang_1.isPresent(this._select)) {\n            this._select._optionMap.delete(this.id);\n            this._select.writeValue(this._select.value);\n        }\n    };\n    /** @nocollapse */\n    NgSelectOption.decorators = [\n        { type: core_1.Directive, args: [{ selector: 'option' },] },\n    ];\n    /** @nocollapse */\n    NgSelectOption.ctorParameters = [\n        { type: core_1.ElementRef, },\n        { type: core_1.Renderer, },\n        { type: SelectControlValueAccessor, decorators: [{ type: core_1.Optional }, { type: core_1.Host },] },\n    ];\n    /** @nocollapse */\n    NgSelectOption.propDecorators = {\n        'ngValue': [{ type: core_1.Input, args: ['ngValue',] },],\n        'value': [{ type: core_1.Input, args: ['value',] },],\n    };\n    return NgSelectOption;\n}());\nexports.NgSelectOption = NgSelectOption;\n//# sourceMappingURL=select_control_value_accessor.js.map"]}