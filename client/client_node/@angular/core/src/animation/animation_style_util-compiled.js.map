{"version":3,"sources":["animation_style_util.js"],"names":[],"mappings":"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","file":"animation_style_util-compiled.js","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\"use strict\";\nvar collection_1 = require('../facade/collection');\nvar lang_1 = require('../facade/lang');\nvar animation_constants_1 = require('./animation_constants');\nvar metadata_1 = require('./metadata');\nfunction prepareFinalAnimationStyles(previousStyles, newStyles, nullValue) {\n    if (nullValue === void 0) { nullValue = null; }\n    var finalStyles = {};\n    collection_1.StringMapWrapper.forEach(newStyles, function (value, prop) {\n        finalStyles[prop] = value == metadata_1.AUTO_STYLE ? nullValue : value.toString();\n    });\n    collection_1.StringMapWrapper.forEach(previousStyles, function (value, prop) {\n        if (!lang_1.isPresent(finalStyles[prop])) {\n            finalStyles[prop] = nullValue;\n        }\n    });\n    return finalStyles;\n}\nexports.prepareFinalAnimationStyles = prepareFinalAnimationStyles;\nfunction balanceAnimationKeyframes(collectedStyles, finalStateStyles, keyframes) {\n    var limit = keyframes.length - 1;\n    var firstKeyframe = keyframes[0];\n    // phase 1: copy all the styles from the first keyframe into the lookup map\n    var flatenedFirstKeyframeStyles = flattenStyles(firstKeyframe.styles.styles);\n    var extraFirstKeyframeStyles = {};\n    var hasExtraFirstStyles = false;\n    collection_1.StringMapWrapper.forEach(collectedStyles, function (value, prop) {\n        // if the style is already defined in the first keyframe then\n        // we do not replace it.\n        if (!flatenedFirstKeyframeStyles[prop]) {\n            flatenedFirstKeyframeStyles[prop] = value;\n            extraFirstKeyframeStyles[prop] = value;\n            hasExtraFirstStyles = true;\n        }\n    });\n    var keyframeCollectedStyles = collection_1.StringMapWrapper.merge({}, flatenedFirstKeyframeStyles);\n    // phase 2: normalize the final keyframe\n    var finalKeyframe = keyframes[limit];\n    collection_1.ListWrapper.insert(finalKeyframe.styles.styles, 0, finalStateStyles);\n    var flatenedFinalKeyframeStyles = flattenStyles(finalKeyframe.styles.styles);\n    var extraFinalKeyframeStyles = {};\n    var hasExtraFinalStyles = false;\n    collection_1.StringMapWrapper.forEach(keyframeCollectedStyles, function (value, prop) {\n        if (!lang_1.isPresent(flatenedFinalKeyframeStyles[prop])) {\n            extraFinalKeyframeStyles[prop] = metadata_1.AUTO_STYLE;\n            hasExtraFinalStyles = true;\n        }\n    });\n    if (hasExtraFinalStyles) {\n        finalKeyframe.styles.styles.push(extraFinalKeyframeStyles);\n    }\n    collection_1.StringMapWrapper.forEach(flatenedFinalKeyframeStyles, function (value, prop) {\n        if (!lang_1.isPresent(flatenedFirstKeyframeStyles[prop])) {\n            extraFirstKeyframeStyles[prop] = metadata_1.AUTO_STYLE;\n            hasExtraFirstStyles = true;\n        }\n    });\n    if (hasExtraFirstStyles) {\n        firstKeyframe.styles.styles.push(extraFirstKeyframeStyles);\n    }\n    return keyframes;\n}\nexports.balanceAnimationKeyframes = balanceAnimationKeyframes;\nfunction clearStyles(styles) {\n    var finalStyles = {};\n    collection_1.StringMapWrapper.keys(styles).forEach(function (key) { finalStyles[key] = null; });\n    return finalStyles;\n}\nexports.clearStyles = clearStyles;\nfunction collectAndResolveStyles(collection, styles) {\n    return styles.map(function (entry) {\n        var stylesObj = {};\n        collection_1.StringMapWrapper.forEach(entry, function (value, prop) {\n            if (value == animation_constants_1.FILL_STYLE_FLAG) {\n                value = collection[prop];\n                if (!lang_1.isPresent(value)) {\n                    value = metadata_1.AUTO_STYLE;\n                }\n            }\n            collection[prop] = value;\n            stylesObj[prop] = value;\n        });\n        return stylesObj;\n    });\n}\nexports.collectAndResolveStyles = collectAndResolveStyles;\nfunction renderStyles(element, renderer, styles) {\n    collection_1.StringMapWrapper.forEach(styles, function (value, prop) { renderer.setElementStyle(element, prop, value); });\n}\nexports.renderStyles = renderStyles;\nfunction flattenStyles(styles) {\n    var finalStyles = {};\n    styles.forEach(function (entry) {\n        collection_1.StringMapWrapper.forEach(entry, function (value, prop) { finalStyles[prop] = value; });\n    });\n    return finalStyles;\n}\nexports.flattenStyles = flattenStyles;\n//# sourceMappingURL=animation_style_util.js.map"]}