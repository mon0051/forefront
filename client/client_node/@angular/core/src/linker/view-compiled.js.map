{"version":3,"sources":["view.js"],"names":[],"mappings":"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","file":"view-compiled.js","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar async_1 = require('../facade/async');\nvar collection_1 = require('../facade/collection');\nvar lang_1 = require('../facade/lang');\nvar element_1 = require('./element');\nvar view_ref_1 = require('./view_ref');\nvar view_type_1 = require('./view_type');\nvar view_utils_1 = require('./view_utils');\nvar change_detection_1 = require('../change_detection/change_detection');\nvar profile_1 = require('../profile/profile');\nvar exceptions_1 = require('./exceptions');\nvar debug_context_1 = require('./debug_context');\nvar element_injector_1 = require('./element_injector');\nvar animation_group_player_1 = require('../animation/animation_group_player');\nvar active_animation_players_map_1 = require('../animation/active_animation_players_map');\nvar _scope_check = profile_1.wtfCreateScope(\"AppView#check(ascii id)\");\n/**\n * Cost of making objects: http://jsperf.com/instantiate-size-of-object\n *\n */\nvar AppView = (function () {\n    function AppView(clazz, componentType, type, viewUtils, parentInjector, declarationAppElement, cdMode) {\n        this.clazz = clazz;\n        this.componentType = componentType;\n        this.type = type;\n        this.viewUtils = viewUtils;\n        this.parentInjector = parentInjector;\n        this.declarationAppElement = declarationAppElement;\n        this.cdMode = cdMode;\n        this.contentChildren = [];\n        this.viewChildren = [];\n        this.viewContainerElement = null;\n        this.numberOfChecks = 0;\n        this.activeAnimationPlayers = new active_animation_players_map_1.ActiveAnimationPlayersMap();\n        this.ref = new view_ref_1.ViewRef_(this);\n        if (type === view_type_1.ViewType.COMPONENT || type === view_type_1.ViewType.HOST) {\n            this.renderer = viewUtils.renderComponent(componentType);\n        }\n        else {\n            this.renderer = declarationAppElement.parentView.renderer;\n        }\n    }\n    Object.defineProperty(AppView.prototype, \"destroyed\", {\n        get: function () { return this.cdMode === change_detection_1.ChangeDetectorStatus.Destroyed; },\n        enumerable: true,\n        configurable: true\n    });\n    AppView.prototype.cancelActiveAnimation = function (element, animationName, removeAllAnimations) {\n        if (removeAllAnimations === void 0) { removeAllAnimations = false; }\n        if (removeAllAnimations) {\n            this.activeAnimationPlayers.findAllPlayersByElement(element).forEach(function (player) { return player.destroy(); });\n        }\n        else {\n            var player = this.activeAnimationPlayers.find(element, animationName);\n            if (lang_1.isPresent(player)) {\n                player.destroy();\n            }\n        }\n    };\n    AppView.prototype.registerAndStartAnimation = function (element, animationName, player) {\n        var _this = this;\n        this.activeAnimationPlayers.set(element, animationName, player);\n        player.onDone(function () { _this.activeAnimationPlayers.remove(element, animationName); });\n        player.play();\n    };\n    AppView.prototype.create = function (context, givenProjectableNodes, rootSelectorOrNode) {\n        this.context = context;\n        var projectableNodes;\n        switch (this.type) {\n            case view_type_1.ViewType.COMPONENT:\n                projectableNodes = view_utils_1.ensureSlotCount(givenProjectableNodes, this.componentType.slotCount);\n                break;\n            case view_type_1.ViewType.EMBEDDED:\n                projectableNodes = this.declarationAppElement.parentView.projectableNodes;\n                break;\n            case view_type_1.ViewType.HOST:\n                // Note: Don't ensure the slot count for the projectableNodes as we store\n                // them only for the contained component view (which will later check the slot count...)\n                projectableNodes = givenProjectableNodes;\n                break;\n        }\n        this._hasExternalHostElement = lang_1.isPresent(rootSelectorOrNode);\n        this.projectableNodes = projectableNodes;\n        return this.createInternal(rootSelectorOrNode);\n    };\n    /**\n     * Overwritten by implementations.\n     * Returns the AppElement for the host element for ViewType.HOST.\n     */\n    AppView.prototype.createInternal = function (rootSelectorOrNode) { return null; };\n    AppView.prototype.init = function (rootNodesOrAppElements, allNodes, disposables, subscriptions) {\n        this.rootNodesOrAppElements = rootNodesOrAppElements;\n        this.allNodes = allNodes;\n        this.disposables = disposables;\n        this.subscriptions = subscriptions;\n        if (this.type === view_type_1.ViewType.COMPONENT) {\n            // Note: the render nodes have been attached to their host element\n            // in the ViewFactory already.\n            this.declarationAppElement.parentView.viewChildren.push(this);\n            this.dirtyParentQueriesInternal();\n        }\n    };\n    AppView.prototype.selectOrCreateHostElement = function (elementName, rootSelectorOrNode, debugInfo) {\n        var hostElement;\n        if (lang_1.isPresent(rootSelectorOrNode)) {\n            hostElement = this.renderer.selectRootElement(rootSelectorOrNode, debugInfo);\n        }\n        else {\n            hostElement = this.renderer.createElement(null, elementName, debugInfo);\n        }\n        return hostElement;\n    };\n    AppView.prototype.injectorGet = function (token, nodeIndex, notFoundResult) {\n        return this.injectorGetInternal(token, nodeIndex, notFoundResult);\n    };\n    /**\n     * Overwritten by implementations\n     */\n    AppView.prototype.injectorGetInternal = function (token, nodeIndex, notFoundResult) {\n        return notFoundResult;\n    };\n    AppView.prototype.injector = function (nodeIndex) {\n        if (lang_1.isPresent(nodeIndex)) {\n            return new element_injector_1.ElementInjector(this, nodeIndex);\n        }\n        else {\n            return this.parentInjector;\n        }\n    };\n    AppView.prototype.destroy = function () {\n        if (this._hasExternalHostElement) {\n            this.renderer.detachView(this.flatRootNodes);\n        }\n        else if (lang_1.isPresent(this.viewContainerElement)) {\n            this.viewContainerElement.detachView(this.viewContainerElement.nestedViews.indexOf(this));\n        }\n        this._destroyRecurse();\n    };\n    AppView.prototype._destroyRecurse = function () {\n        if (this.cdMode === change_detection_1.ChangeDetectorStatus.Destroyed) {\n            return;\n        }\n        var children = this.contentChildren;\n        for (var i = 0; i < children.length; i++) {\n            children[i]._destroyRecurse();\n        }\n        children = this.viewChildren;\n        for (var i = 0; i < children.length; i++) {\n            children[i]._destroyRecurse();\n        }\n        this.destroyLocal();\n        this.cdMode = change_detection_1.ChangeDetectorStatus.Destroyed;\n    };\n    AppView.prototype.destroyLocal = function () {\n        var _this = this;\n        var hostElement = this.type === view_type_1.ViewType.COMPONENT ? this.declarationAppElement.nativeElement : null;\n        for (var i = 0; i < this.disposables.length; i++) {\n            this.disposables[i]();\n        }\n        for (var i = 0; i < this.subscriptions.length; i++) {\n            async_1.ObservableWrapper.dispose(this.subscriptions[i]);\n        }\n        this.destroyInternal();\n        this.dirtyParentQueriesInternal();\n        if (this.activeAnimationPlayers.length == 0) {\n            this.renderer.destroyView(hostElement, this.allNodes);\n        }\n        else {\n            var player = new animation_group_player_1.AnimationGroupPlayer(this.activeAnimationPlayers.getAllPlayers());\n            player.onDone(function () { _this.renderer.destroyView(hostElement, _this.allNodes); });\n        }\n    };\n    /**\n     * Overwritten by implementations\n     */\n    AppView.prototype.destroyInternal = function () { };\n    /**\n     * Overwritten by implementations\n     */\n    AppView.prototype.detachInternal = function () { };\n    AppView.prototype.detach = function () {\n        var _this = this;\n        this.detachInternal();\n        if (this.activeAnimationPlayers.length == 0) {\n            this.renderer.detachView(this.flatRootNodes);\n        }\n        else {\n            var player = new animation_group_player_1.AnimationGroupPlayer(this.activeAnimationPlayers.getAllPlayers());\n            player.onDone(function () { _this.renderer.detachView(_this.flatRootNodes); });\n        }\n    };\n    Object.defineProperty(AppView.prototype, \"changeDetectorRef\", {\n        get: function () { return this.ref; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AppView.prototype, \"parent\", {\n        get: function () {\n            return lang_1.isPresent(this.declarationAppElement) ? this.declarationAppElement.parentView : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AppView.prototype, \"flatRootNodes\", {\n        get: function () { return view_utils_1.flattenNestedViewRenderNodes(this.rootNodesOrAppElements); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AppView.prototype, \"lastRootNode\", {\n        get: function () {\n            var lastNode = this.rootNodesOrAppElements.length > 0 ?\n                this.rootNodesOrAppElements[this.rootNodesOrAppElements.length - 1] :\n                null;\n            return _findLastRenderNode(lastNode);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Overwritten by implementations\n     */\n    AppView.prototype.dirtyParentQueriesInternal = function () { };\n    AppView.prototype.detectChanges = function (throwOnChange) {\n        var s = _scope_check(this.clazz);\n        if (this.cdMode === change_detection_1.ChangeDetectorStatus.Checked ||\n            this.cdMode === change_detection_1.ChangeDetectorStatus.Errored)\n            return;\n        if (this.cdMode === change_detection_1.ChangeDetectorStatus.Destroyed) {\n            this.throwDestroyedError('detectChanges');\n        }\n        this.detectChangesInternal(throwOnChange);\n        if (this.cdMode === change_detection_1.ChangeDetectorStatus.CheckOnce)\n            this.cdMode = change_detection_1.ChangeDetectorStatus.Checked;\n        this.numberOfChecks++;\n        profile_1.wtfLeave(s);\n    };\n    /**\n     * Overwritten by implementations\n     */\n    AppView.prototype.detectChangesInternal = function (throwOnChange) {\n        this.detectContentChildrenChanges(throwOnChange);\n        this.detectViewChildrenChanges(throwOnChange);\n    };\n    AppView.prototype.detectContentChildrenChanges = function (throwOnChange) {\n        for (var i = 0; i < this.contentChildren.length; ++i) {\n            var child = this.contentChildren[i];\n            if (child.cdMode === change_detection_1.ChangeDetectorStatus.Detached)\n                continue;\n            child.detectChanges(throwOnChange);\n        }\n    };\n    AppView.prototype.detectViewChildrenChanges = function (throwOnChange) {\n        for (var i = 0; i < this.viewChildren.length; ++i) {\n            var child = this.viewChildren[i];\n            if (child.cdMode === change_detection_1.ChangeDetectorStatus.Detached)\n                continue;\n            child.detectChanges(throwOnChange);\n        }\n    };\n    AppView.prototype.addToContentChildren = function (renderAppElement) {\n        renderAppElement.parentView.contentChildren.push(this);\n        this.viewContainerElement = renderAppElement;\n        this.dirtyParentQueriesInternal();\n    };\n    AppView.prototype.removeFromContentChildren = function (renderAppElement) {\n        collection_1.ListWrapper.remove(renderAppElement.parentView.contentChildren, this);\n        this.dirtyParentQueriesInternal();\n        this.viewContainerElement = null;\n    };\n    AppView.prototype.markAsCheckOnce = function () { this.cdMode = change_detection_1.ChangeDetectorStatus.CheckOnce; };\n    AppView.prototype.markPathToRootAsCheckOnce = function () {\n        var c = this;\n        while (lang_1.isPresent(c) && c.cdMode !== change_detection_1.ChangeDetectorStatus.Detached) {\n            if (c.cdMode === change_detection_1.ChangeDetectorStatus.Checked) {\n                c.cdMode = change_detection_1.ChangeDetectorStatus.CheckOnce;\n            }\n            var parentEl = c.type === view_type_1.ViewType.COMPONENT ? c.declarationAppElement : c.viewContainerElement;\n            c = lang_1.isPresent(parentEl) ? parentEl.parentView : null;\n        }\n    };\n    AppView.prototype.eventHandler = function (cb) { return cb; };\n    AppView.prototype.throwDestroyedError = function (details) { throw new exceptions_1.ViewDestroyedException(details); };\n    return AppView;\n}());\nexports.AppView = AppView;\nvar DebugAppView = (function (_super) {\n    __extends(DebugAppView, _super);\n    function DebugAppView(clazz, componentType, type, viewUtils, parentInjector, declarationAppElement, cdMode, staticNodeDebugInfos) {\n        _super.call(this, clazz, componentType, type, viewUtils, parentInjector, declarationAppElement, cdMode);\n        this.staticNodeDebugInfos = staticNodeDebugInfos;\n        this._currentDebugContext = null;\n    }\n    DebugAppView.prototype.create = function (context, givenProjectableNodes, rootSelectorOrNode) {\n        this._resetDebug();\n        try {\n            return _super.prototype.create.call(this, context, givenProjectableNodes, rootSelectorOrNode);\n        }\n        catch (e) {\n            this._rethrowWithContext(e, e.stack);\n            throw e;\n        }\n    };\n    DebugAppView.prototype.injectorGet = function (token, nodeIndex, notFoundResult) {\n        this._resetDebug();\n        try {\n            return _super.prototype.injectorGet.call(this, token, nodeIndex, notFoundResult);\n        }\n        catch (e) {\n            this._rethrowWithContext(e, e.stack);\n            throw e;\n        }\n    };\n    DebugAppView.prototype.detach = function () {\n        this._resetDebug();\n        try {\n            _super.prototype.detach.call(this);\n        }\n        catch (e) {\n            this._rethrowWithContext(e, e.stack);\n            throw e;\n        }\n    };\n    DebugAppView.prototype.destroyLocal = function () {\n        this._resetDebug();\n        try {\n            _super.prototype.destroyLocal.call(this);\n        }\n        catch (e) {\n            this._rethrowWithContext(e, e.stack);\n            throw e;\n        }\n    };\n    DebugAppView.prototype.detectChanges = function (throwOnChange) {\n        this._resetDebug();\n        try {\n            _super.prototype.detectChanges.call(this, throwOnChange);\n        }\n        catch (e) {\n            this._rethrowWithContext(e, e.stack);\n            throw e;\n        }\n    };\n    DebugAppView.prototype._resetDebug = function () { this._currentDebugContext = null; };\n    DebugAppView.prototype.debug = function (nodeIndex, rowNum, colNum) {\n        return this._currentDebugContext = new debug_context_1.DebugContext(this, nodeIndex, rowNum, colNum);\n    };\n    DebugAppView.prototype._rethrowWithContext = function (e, stack) {\n        if (!(e instanceof exceptions_1.ViewWrappedException)) {\n            if (!(e instanceof exceptions_1.ExpressionChangedAfterItHasBeenCheckedException)) {\n                this.cdMode = change_detection_1.ChangeDetectorStatus.Errored;\n            }\n            if (lang_1.isPresent(this._currentDebugContext)) {\n                throw new exceptions_1.ViewWrappedException(e, stack, this._currentDebugContext);\n            }\n        }\n    };\n    DebugAppView.prototype.eventHandler = function (cb) {\n        var _this = this;\n        var superHandler = _super.prototype.eventHandler.call(this, cb);\n        return function (event /** TODO #9100 */) {\n            _this._resetDebug();\n            try {\n                return superHandler(event);\n            }\n            catch (e) {\n                _this._rethrowWithContext(e, e.stack);\n                throw e;\n            }\n        };\n    };\n    return DebugAppView;\n}(AppView));\nexports.DebugAppView = DebugAppView;\nfunction _findLastRenderNode(node) {\n    var lastNode;\n    if (node instanceof element_1.AppElement) {\n        var appEl = node;\n        lastNode = appEl.nativeElement;\n        if (lang_1.isPresent(appEl.nestedViews)) {\n            // Note: Views might have no root nodes at all!\n            for (var i = appEl.nestedViews.length - 1; i >= 0; i--) {\n                var nestedView = appEl.nestedViews[i];\n                if (nestedView.rootNodesOrAppElements.length > 0) {\n                    lastNode = _findLastRenderNode(nestedView.rootNodesOrAppElements[nestedView.rootNodesOrAppElements.length - 1]);\n                }\n            }\n        }\n    }\n    else {\n        lastNode = node;\n    }\n    return lastNode;\n}\n//# sourceMappingURL=view.js.map"]}