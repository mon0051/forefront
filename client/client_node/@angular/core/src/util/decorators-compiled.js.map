{"version":3,"sources":["decorators.js"],"names":[],"mappings":"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","file":"decorators-compiled.js","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\"use strict\";\nvar lang_1 = require('../facade/lang');\nvar _nextClassId = 0;\nfunction extractAnnotation(annotation) {\n    if (lang_1.isFunction(annotation) && annotation.hasOwnProperty('annotation')) {\n        // it is a decorator, extract annotation\n        annotation = annotation.annotation;\n    }\n    return annotation;\n}\nfunction applyParams(fnOrArray, key) {\n    if (fnOrArray === Object || fnOrArray === String || fnOrArray === Function ||\n        fnOrArray === Number || fnOrArray === Array) {\n        throw new Error(\"Can not use native \" + lang_1.stringify(fnOrArray) + \" as constructor\");\n    }\n    if (lang_1.isFunction(fnOrArray)) {\n        return fnOrArray;\n    }\n    else if (fnOrArray instanceof Array) {\n        var annotations = fnOrArray;\n        var fn = fnOrArray[fnOrArray.length - 1];\n        if (!lang_1.isFunction(fn)) {\n            throw new Error(\"Last position of Class method array must be Function in key \" + key + \" was '\" + lang_1.stringify(fn) + \"'\");\n        }\n        var annoLength = annotations.length - 1;\n        if (annoLength != fn.length) {\n            throw new Error(\"Number of annotations (\" + annoLength + \") does not match number of arguments (\" + fn.length + \") in the function: \" + lang_1.stringify(fn));\n        }\n        var paramsAnnotations = [];\n        for (var i = 0, ii = annotations.length - 1; i < ii; i++) {\n            var paramAnnotations = [];\n            paramsAnnotations.push(paramAnnotations);\n            var annotation = annotations[i];\n            if (annotation instanceof Array) {\n                for (var j = 0; j < annotation.length; j++) {\n                    paramAnnotations.push(extractAnnotation(annotation[j]));\n                }\n            }\n            else if (lang_1.isFunction(annotation)) {\n                paramAnnotations.push(extractAnnotation(annotation));\n            }\n            else {\n                paramAnnotations.push(annotation);\n            }\n        }\n        Reflect.defineMetadata('parameters', paramsAnnotations, fn);\n        return fn;\n    }\n    else {\n        throw new Error(\"Only Function or Array is supported in Class definition for key '\" + key + \"' is '\" + lang_1.stringify(fnOrArray) + \"'\");\n    }\n}\n/**\n * Provides a way for expressing ES6 classes with parameter annotations in ES5.\n *\n * ## Basic Example\n *\n * ```\n * var Greeter = ng.Class({\n *   constructor: function(name) {\n *     this.name = name;\n *   },\n *\n *   greet: function() {\n *     alert('Hello ' + this.name + '!');\n *   }\n * });\n * ```\n *\n * is equivalent to ES6:\n *\n * ```\n * class Greeter {\n *   constructor(name) {\n *     this.name = name;\n *   }\n *\n *   greet() {\n *     alert('Hello ' + this.name + '!');\n *   }\n * }\n * ```\n *\n * or equivalent to ES5:\n *\n * ```\n * var Greeter = function (name) {\n *   this.name = name;\n * }\n *\n * Greeter.prototype.greet = function () {\n *   alert('Hello ' + this.name + '!');\n * }\n * ```\n *\n * ### Example with parameter annotations\n *\n * ```\n * var MyService = ng.Class({\n *   constructor: [String, [new Query(), QueryList], function(name, queryList) {\n *     ...\n *   }]\n * });\n * ```\n *\n * is equivalent to ES6:\n *\n * ```\n * class MyService {\n *   constructor(name: string, @Query() queryList: QueryList) {\n *     ...\n *   }\n * }\n * ```\n *\n * ### Example with inheritance\n *\n * ```\n * var Shape = ng.Class({\n *   constructor: (color) {\n *     this.color = color;\n *   }\n * });\n *\n * var Square = ng.Class({\n *   extends: Shape,\n *   constructor: function(color, size) {\n *     Shape.call(this, color);\n *     this.size = size;\n *   }\n * });\n * ```\n * @stable\n */\nfunction Class(clsDef) {\n    var constructor = applyParams(clsDef.hasOwnProperty('constructor') ? clsDef.constructor : undefined, 'constructor');\n    var proto = constructor.prototype;\n    if (clsDef.hasOwnProperty('extends')) {\n        if (lang_1.isFunction(clsDef.extends)) {\n            constructor.prototype = proto =\n                Object.create(clsDef.extends.prototype);\n        }\n        else {\n            throw new Error(\"Class definition 'extends' property must be a constructor function was: \" + lang_1.stringify(clsDef.extends));\n        }\n    }\n    for (var key in clsDef) {\n        if (key != 'extends' && key != 'prototype' && clsDef.hasOwnProperty(key)) {\n            proto[key] = applyParams(clsDef[key], key);\n        }\n    }\n    if (this && this.annotations instanceof Array) {\n        Reflect.defineMetadata('annotations', this.annotations, constructor);\n    }\n    if (!constructor['name']) {\n        constructor['overriddenName'] = \"class\" + _nextClassId++;\n    }\n    return constructor;\n}\nexports.Class = Class;\nvar Reflect = lang_1.global.Reflect;\n// Throw statement at top-level is disallowed by closure compiler in ES6 input.\n// Wrap in an IIFE as a work-around.\n(function checkReflect() {\n    if (!(Reflect && Reflect.getMetadata)) {\n        throw 'reflect-metadata shim is required when using class decorators';\n    }\n})();\nfunction makeDecorator(annotationCls /* TODO #9100 */, chainFn) {\n    if (chainFn === void 0) { chainFn = null; }\n    function DecoratorFactory(objOrType /** TODO #9100 */) {\n        var annotationInstance = new annotationCls(objOrType);\n        if (this instanceof annotationCls) {\n            return annotationInstance;\n        }\n        else {\n            var chainAnnotation = lang_1.isFunction(this) && this.annotations instanceof Array ? this.annotations : [];\n            chainAnnotation.push(annotationInstance);\n            var TypeDecorator = function TypeDecorator(cls /** TODO #9100 */) {\n                var annotations = Reflect.getOwnMetadata('annotations', cls);\n                annotations = annotations || [];\n                annotations.push(annotationInstance);\n                Reflect.defineMetadata('annotations', annotations, cls);\n                return cls;\n            };\n            TypeDecorator.annotations = chainAnnotation;\n            TypeDecorator.Class = Class;\n            if (chainFn)\n                chainFn(TypeDecorator);\n            return TypeDecorator;\n        }\n    }\n    DecoratorFactory.prototype = Object.create(annotationCls.prototype);\n    DecoratorFactory.annotationCls = annotationCls;\n    return DecoratorFactory;\n}\nexports.makeDecorator = makeDecorator;\nfunction makeParamDecorator(annotationCls /** TODO #9100 */) {\n    function ParamDecoratorFactory() {\n        var args = []; /** TODO #9100 */\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i - 0] = arguments[_i];\n        }\n        var annotationInstance = Object.create(annotationCls.prototype);\n        annotationCls.apply(annotationInstance, args);\n        if (this instanceof annotationCls) {\n            return annotationInstance;\n        }\n        else {\n            ParamDecorator.annotation = annotationInstance;\n            return ParamDecorator;\n        }\n        function ParamDecorator(cls /** TODO #9100 */, unusedKey /** TODO #9100 */, index /** TODO #9100 */) {\n            var parameters = Reflect.getMetadata('parameters', cls);\n            parameters = parameters || [];\n            // there might be gaps if some in between parameters do not have annotations.\n            // we pad with nulls.\n            while (parameters.length <= index) {\n                parameters.push(null);\n            }\n            parameters[index] = parameters[index] || [];\n            var annotationsForParam = parameters[index];\n            annotationsForParam.push(annotationInstance);\n            Reflect.defineMetadata('parameters', parameters, cls);\n            return cls;\n        }\n    }\n    ParamDecoratorFactory.prototype = Object.create(annotationCls.prototype);\n    ParamDecoratorFactory.annotationCls = annotationCls;\n    return ParamDecoratorFactory;\n}\nexports.makeParamDecorator = makeParamDecorator;\nfunction makePropDecorator(annotationCls /** TODO #9100 */) {\n    function PropDecoratorFactory() {\n        var args = []; /** TODO #9100 */\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i - 0] = arguments[_i];\n        }\n        var decoratorInstance = Object.create(annotationCls.prototype);\n        annotationCls.apply(decoratorInstance, args);\n        if (this instanceof annotationCls) {\n            return decoratorInstance;\n        }\n        else {\n            return function PropDecorator(target, name) {\n                var meta = Reflect.getOwnMetadata('propMetadata', target.constructor);\n                meta = meta || {};\n                meta[name] = meta[name] || [];\n                meta[name].unshift(decoratorInstance);\n                Reflect.defineMetadata('propMetadata', meta, target.constructor);\n            };\n        }\n    }\n    PropDecoratorFactory.prototype = Object.create(annotationCls.prototype);\n    PropDecoratorFactory.annotationCls = annotationCls;\n    return PropDecoratorFactory;\n}\nexports.makePropDecorator = makePropDecorator;\n//# sourceMappingURL=decorators.js.map"]}